<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>From Maya Export to Render-Ready Houdini Scene | Alejandro Cabrera</title>

    <meta name="description" content="How we automated the chain from Maya USD animation export through headless Houdini scene building to render farm submission, saving 30 minutes per shot.">
    <meta name="author" content="Alejandro Cabrera">
    <meta name="keywords" content="VFX, pipeline, USD, Maya, Houdini, Deadline, automation, render farm">

    <meta property="og:type" content="article">
    <meta property="og:title" content="From Maya Export to Render-Ready Houdini Scene">
    <meta property="og:description" content="Automating the chain from Maya USD export through headless Houdini to render farm submission.">
    <meta property="article:published_time" content="2026-02-04">
    <meta property="article:author" content="Alejandro Cabrera">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="From Maya Export to Render-Ready Houdini Scene">

    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../components.css">
    <link rel="stylesheet" href="../portfolio.css">
    <link rel="stylesheet" href="../blog.css">
</head>
<body>

<div class="reading-progress" id="reading-progress"></div>

<div class="layout">
    <aside class="rail">
        <a href="../index.html" class="rail-logo">AC</a>
        <nav class="rail-nav">
            <a href="../index.html" class="rail-link" title="Home">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                    <polyline points="9 22 9 12 15 12 15 22"/>
                </svg>
            </a>
            <a href="../index.html#blog" class="rail-link active" title="Blog">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 19l7-7 3 3-7 7-3-3z"/>
                    <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/>
                    <path d="M2 2l7.586 7.586"/>
                    <circle cx="11" cy="11" r="2"/>
                </svg>
            </a>
        </nav>
        <div class="rail-cryptic">記事</div>
    </aside>

    <main class="main">
        <article class="blog-article">
            <header class="article-header">
                <nav class="article-breadcrumb">
                    <a href="../index.html">Home</a>
                    <span>/</span>
                    <a href="../index.html#blog">Blog</a>
                    <span>/</span>
                    <span>Automating Shot Pipeline</span>
                </nav>

                <div class="article-meta-top">
                    <span class="badge badge-peach">Pipeline</span>
                    <span class="article-reading-time" id="reading-time">7 min read</span>
                </div>

                <h1 class="article-title">From Maya Export to Render-Ready Houdini Scene</h1>

                <p class="article-subtitle">
                    How we automated the chain from Maya USD animation export through headless
                    Houdini scene building to render farm submission, saving 30 minutes per shot.
                </p>

                <div class="article-author">
                    <div class="avatar avatar-sm">
                        <span class="avatar-fallback">AC</span>
                    </div>
                    <div class="article-author-info">
                        <span class="article-author-name">Alejandro Cabrera</span>
                        <time class="article-date" datetime="2026-02-04">February 4, 2026</time>
                    </div>
                </div>
            </header>

            <nav class="article-toc" id="toc">
                <h4 class="toc-title">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                        <line x1="8" y1="6" x2="21" y2="6"/>
                        <line x1="8" y1="12" x2="21" y2="12"/>
                        <line x1="8" y1="18" x2="21" y2="18"/>
                        <line x1="3" y1="6" x2="3.01" y2="6"/>
                        <line x1="3" y1="12" x2="3.01" y2="12"/>
                        <line x1="3" y1="18" x2="3.01" y2="18"/>
                    </svg>
                    Contents
                </h4>
                <ul class="toc-list">
                    <li><a href="#manual-hell" class="toc-link">30 Minutes Per Shot, 500 Shots</a></li>
                    <li><a href="#the-chain" class="toc-link">What We Automated</a></li>
                    <li><a href="#maya-exporter" class="toc-link">A Custom USD Exporter in Maya</a></li>
                    <li><a href="#hython-builder" class="toc-link">Building Houdini Scenes with hython</a></li>
                    <li><a href="#deadline-deps" class="toc-link">Deadline Job Dependencies</a></li>
                    <li><a href="#error-handling" class="toc-link">When Something in the Chain Breaks</a></li>
                    <li><a href="#results" class="toc-link">What It Actually Saved Us</a></li>
                </ul>
            </nav>

            <div class="article-content" id="article-content">
                <section id="manual-hell">
                    <p class="lead">
                        On a VFX show with 500+ shots, there are processes that seem small in isolation but add up to an enormous amount of wasted time. At Ghost VFX, one of those was the handoff between animation and lighting. An animator would finish a shot in Maya, export the USD animation cache, and then a lighter would have to manually set up a Houdini scene: sublayer in the animation, reference the correct asset versions, hook up the LOPs render graph, adjust settings, and submit to the render farm. That whole process took about 30 minutes per shot if everything went smoothly. It rarely went smoothly.
                    </p>

                    <p>
                        We automated the entire chain. An artist would hit one button in Maya, and the next morning there would be a render waiting for review. No manual Houdini setup. No copying paths around. No forgetting to update an asset version. This is how we built it.
                    </p>
                </section>

                <section id="the-chain">
                    <h2>What We Automated</h2>

                    <p>
                        The pipeline had four steps, each triggering the next:
                    </p>

                    <ol>
                        <li><strong>Maya USD export</strong> via a custom publish tool. Animator clicks "Publish Animation," which validates the scene and writes a USD animation cache to the publish area.</li>
                        <li><strong>Houdini scene build</strong> via a CLI tool running hython (headless Houdini). Takes the published animation, a shot template, and the latest approved asset versions, then assembles a render-ready .hip file with the correct LOPs network.</li>
                        <li><strong>USD path resolution.</strong> The scene builder updates all sublayer and reference paths to point at the correct published versions on disk. No hardcoded paths, no manual editing.</li>
                        <li><strong>Deadline submission.</strong> The finished .hip gets submitted to the render farm with the right frame range, render settings, and job dependencies so it only starts after all upstream jobs complete.</li>
                    </ol>

                    <p>
                        Each step ran as a separate Deadline job. If any step failed, the chain stopped and the artist got a notification with the error. No silent failures.
                    </p>
                </section>

                <section id="maya-exporter">
                    <h2>A Custom USD Exporter in Maya</h2>

                    <p>
                        Maya has built-in USD export, but we wrapped it in a custom publish tool for a few reasons. First, we needed to validate the scene before export: check that the rig references were clean, the frame range matched what was in ShotGrid, and the animation layer structure was correct. Second, we wanted to control exactly which prims got exported and how they were named, so downstream tools could rely on a consistent structure.
                    </p>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">Python</span>
                            <button class="code-copy" data-copy="code-1" title="Copy code">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                                </svg>
                                <span>Copy</span>
                            </button>
                        </div>
                        <pre><code id="code-1">def publish_animation(shot_code, frame_range):
    """Validate, export USD, register in ShotGrid, trigger downstream."""
    errors = run_validators(shot_code)
    if errors:
        show_error_dialog(errors)
        return

    output_path = get_publish_path(shot_code, "anim", version="next")
    cmds.mayaUSDExport(
        file=output_path,
        selection=False,
        frameRange=frame_range,
        exportSkels="auto",
        stripNamespaces=True,
    )

    sg_version = register_publish(shot_code, output_path, "anim")

    # Queue the scene build as a Deadline job
    submit_scene_build_job(
        shot_code=shot_code,
        anim_usd=output_path,
        sg_version=sg_version,
    )</code></pre>
                    </div>

                    <p>
                        The key detail is that last function call. Instead of telling the artist "OK, now go open Houdini and set up your scene," the publish tool immediately submits a Deadline job that will build the Houdini scene on the farm. From the animator's perspective, they click publish and they are done.
                    </p>
                </section>

                <section id="hython-builder">
                    <h2>Building Houdini Scenes with hython</h2>

                    <p>
                        This was the core of the system and the part that took the most iteration to get right. We had a Python script that ran inside hython (Houdini's headless Python interpreter) and assembled a .hip file from scratch using Houdini's Python API.
                    </p>

                    <p>
                        The script worked from a template. We had a base .hip file with a LOPs network that defined the render graph structure: where the animation sublayer goes, where asset references go, where lights come from, and how the final USD stage gets composed before hitting the Karma render node. The build script would:
                    </p>

                    <ol>
                        <li>Open the template .hip file</li>
                        <li>Find the animation sublayer node and point it at the freshly published USD cache</li>
                        <li>Query ShotGrid for the latest approved versions of each asset in the shot</li>
                        <li>Update reference nodes to point at the correct published USD files</li>
                        <li>Set the frame range from ShotGrid</li>
                        <li>Save the .hip to the shot's work area</li>
                    </ol>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">Python</span>
                            <button class="code-copy" data-copy="code-2" title="Copy code">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                                </svg>
                                <span>Copy</span>
                            </button>
                        </div>
                        <pre><code id="code-2">import hou

def build_shot_scene(shot_code, anim_usd_path, asset_versions):
    """Run inside hython. Assembles a render-ready .hip from template."""
    hou.hipFile.load(TEMPLATE_HIP)

    # Wire in the animation cache
    anim_node = hou.node("/stage/anim_sublayer")
    anim_node.parm("filepath1").set(anim_usd_path)

    # Update each asset reference to the approved version
    for asset_name, version_path in asset_versions.items():
        ref_node = hou.node(f"/stage/assets/{asset_name}_ref")
        if ref_node:
            ref_node.parm("filepath1").set(version_path)

    # Set frame range
    start, end = get_frame_range_from_sg(shot_code)
    hou.playbar.setFrameRange(start, end)
    hou.playbar.setPlaybackRange(start, end)

    output_hip = get_work_path(shot_code, "lighting")
    hou.hipFile.save(output_hip)
    return output_hip</code></pre>
                    </div>

                    <p>
                        The tricky part was USD path management. Asset publishes lived in a versioned directory structure, and the paths had to be absolute and valid on the farm's shared filesystem. We had a resolver that converted logical asset names to filesystem paths, and the build script always resolved paths at build time rather than relying on runtime resolution. It was less elegant but much easier to debug when something went wrong.
                    </p>
                </section>

                <section id="deadline-deps">
                    <h2>Deadline Job Dependencies</h2>

                    <p>
                        Deadline has a straightforward job dependency system. You submit a job and get back a job ID. When you submit the next job, you pass in the parent job ID as a dependency. The child job sits in the queue and only starts when the parent completes successfully.
                    </p>

                    <p>
                        Our chain looked like this:
                    </p>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">Python</span>
                            <button class="code-copy" data-copy="code-3" title="Copy code">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                                </svg>
                                <span>Copy</span>
                            </button>
                        </div>
                        <pre><code id="code-3">def submit_full_chain(shot_code, anim_usd):
    # Step 1: Scene build (hython job)
    build_job_id = deadline.submit(
        plugin="Hython",
        script=SCENE_BUILD_SCRIPT,
        args=f"--shot {shot_code} --anim {anim_usd}",
        pool="pipeline",
        priority=70,
    )

    # Step 2: Render (depends on build completing)
    render_hip = get_work_path(shot_code, "lighting")
    render_job_id = deadline.submit(
        plugin="Houdini",
        scene_file=render_hip,
        frames=get_frame_range(shot_code),
        pool="render",
        priority=50,
        dependency_ids=[build_job_id],
    )

    return build_job_id, render_job_id</code></pre>
                    </div>

                    <p>
                        We used different pools and priorities for each step. Scene builds were fast (under a minute) and ran on lighter machines in the pipeline pool. Renders were heavy and went to the dedicated render pool. The priority difference meant builds would jump ahead in the queue since they were blocking downstream work.
                    </p>

                    <p>
                        One thing we added later was a notification step. After the render completed (or failed), a lightweight job would fire that posted the result to the shot's ShotGrid page and sent a Slack message to the artist. That closed the loop so nobody had to keep checking Deadline Monitor.
                    </p>
                </section>

                <section id="error-handling">
                    <h2>When Something in the Chain Breaks</h2>

                    <p>
                        Automated pipelines are great until they fail silently. We spent a lot of time on error handling because a broken chain that nobody notices is worse than a manual process.
                    </p>

                    <p>
                        Each step had its own validation. The Maya exporter checked scene integrity before writing anything. The hython builder verified that all asset paths existed on disk before saving the .hip. The Deadline submission checked that the .hip file was actually there and had the expected nodes.
                    </p>

                    <p>
                        When a step failed, Deadline marked the job as failed, which automatically prevented the dependent jobs from starting. The notification system would ping the responsible artist and the pipeline team with the error message and a link to the Deadline job log. Most failures were mundane things: an asset had not been published yet, a path was wrong because someone renamed a sequence, or hython ran out of memory on a particularly heavy shot.
                    </p>

                    <p>
                        We also built a retry mechanism for transient failures. If the hython job failed because of a license server timeout (which happened more often than it should have), Deadline would retry it twice before giving up. That alone eliminated probably a third of the failures we had to investigate manually.
                    </p>
                </section>

                <section id="results">
                    <h2>What It Actually Saved Us</h2>

                    <p>
                        Before this system, the animation-to-lighting handoff was a bottleneck. Lighters would start their day waiting for scenes to be set up, or they would set them up themselves and inevitably get a path wrong or use an outdated asset version. On a show with 500+ shots, even small per-shot inefficiencies compound fast.
                    </p>

                    <p>
                        After the automation was in place, an animator could publish at 6 PM and the lighter would have a render waiting for review at 8 AM the next morning. No manual setup, no path errors, no version mismatches. The lighters could focus on actually lighting instead of wrangling file paths.
                    </p>

                    <p>
                        The rough math: 30 minutes of manual setup per shot, 500 shots, many of which go through multiple iterations. That is hundreds of hours of artist time over the course of a show. The automation took about three weeks to build, including the error handling and the notification system. It paid for itself before the first month was over.
                    </p>

                    <p>
                        If I were to do it again, I would start even simpler. Our first version tried to handle every edge case from day one, which slowed down the initial rollout. A better approach would have been to automate the common path first, let artists fall back to manual setup for edge cases, and then gradually handle more situations as we learned what actually failed in practice. But even with the extra upfront work, it was one of the most impactful things I built at Ghost. Nothing feels better than turning a repetitive manual process into something that just runs.
                    </p>
                </section>
            </div>

            <footer class="article-footer">
                <div class="article-tags">
                    <span class="article-tags-label">Topics:</span>
                    <a href="#" class="badge badge-secondary">VFX</a>
                    <a href="#" class="badge badge-secondary">USD</a>
                    <a href="#" class="badge badge-secondary">Automation</a>
                    <a href="#" class="badge badge-secondary">Houdini</a>
                    <a href="#" class="badge badge-secondary">Deadline</a>
                </div>

                <div class="article-share">
                    <span class="article-share-label">Share:</span>
                    <button class="btn btn-ghost btn-sm share-btn" data-share="twitter" title="Share on Twitter">
                        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                    </button>
                    <button class="btn btn-ghost btn-sm share-btn" data-share="linkedin" title="Share on LinkedIn">
                        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                    </button>
                    <button class="btn btn-ghost btn-sm share-btn" data-share="copy" title="Copy link">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                        </svg>
                    </button>
                </div>

                <div class="author-card">
                    <div class="avatar avatar-lg">
                        <span class="avatar-fallback">AC</span>
                    </div>
                    <div class="author-card-content">
                        <h4 class="author-card-name">Alejandro Cabrera</h4>
                        <p class="author-card-bio">
                            Pipeline TD and Software Developer based in Canada. Building tools for VFX pipelines and cloud infrastructure.
                        </p>
                        <div class="author-card-links">
                            <a href="https://twitter.com/tv01d" class="btn btn-sm btn-ghost">Twitter</a>
                            <a href="https://github.com/voidreamer" class="btn btn-sm btn-ghost">GitHub</a>
                        </div>
                    </div>
                </div>

                <nav class="article-nav">
                    <a href="mvc-pyside-dcc-tools.html" class="article-nav-link article-nav-prev">
                        <span class="article-nav-label">Previous</span>
                        <span class="article-nav-title">MVC in DCC Tools: Data Models Matter More Than UI</span>
                    </a>
                    <div class="article-nav-link article-nav-next" style="visibility: hidden;">
                        <span class="article-nav-label">Next</span>
                        <span class="article-nav-title"></span>
                    </div>
                </nav>
            </footer>
        </article>

        <footer class="p-footer">
            <div class="p-footer-left">
                <span class="cryptic-label">系統終端</span>
                <span>Built with care, 2026</span>
            </div>
            <div class="p-footer-right">
                <a href="https://twitter.com/tv01d">Twitter</a>
                <a href="https://github.com/voidreamer">GitHub</a>
            </div>
        </footer>
    </main>
</div>

<div class="toast" id="toast"></div>

<script src="../app.js"></script>
</body>
</html>
